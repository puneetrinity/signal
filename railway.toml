# Railway configuration
# Start command should be set per-service in Railway dashboard:
# - signal: npm run start (default)
# - enrichment-worker: npm run worker:enrichment

[build]
builder = "nixpacks"

[deploy]
# Don't set startCommand here - let each service configure its own in dashboard
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Run migrations before starting the service
# This runs once per deployment, after build
releaseCommand = "npx prisma migrate deploy"
