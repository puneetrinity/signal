# Railway configuration
# Main service: npm run start
# Worker service: Override startCommand to npm run worker:enrichment

[build]
builder = "nixpacks"

[deploy]
startCommand = "npm run start"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Run migrations before starting the service
# This runs once per deployment, after build
releaseCommand = "npx prisma migrate deploy"
